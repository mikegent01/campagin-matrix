<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vigilance Terminal | Mushroom Kingdom Maps</title>
    <link rel="stylesheet" href="global.css">
    <link rel="stylesheet" href="layout.css">
    <link rel="stylesheet" href="components.css">
    <link rel="stylesheet" href="maps.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="tablet-frame">
        <div class="scanline-overlay"></div>
        <div id="app">
             <aside id="sidebar"></aside>
            <main id="main-content">
                 <h2 class="page-title">Tactical Maps: Mushroom Kingdom & Adjacent Realms</h2>
                 <div id="maps-layout">
                    <div id="map-view-container">
                        <div id="map-controls">
                            <div id="dynamic-map-controls">
                                <!-- Tabs and modes will be rendered here by map-ui.js -->
                            </div>
                            <button id="edit-map-btn" class="control-btn" style="display: none;">Edit Map</button>
                        </div>
                        <div id="map-editor-toolbar" style="display: none;">
                            <div id="poi-palette"></div>
                            <div class="toolbar-actions">
                                <button id="draw-fog-btn" class="control-btn">Draw Fog</button>
                                <button id="remove-item-btn" class="control-btn">Remove Item</button>
                                <button id="generate-code-btn" class="control-btn positive">Generate Code</button>
                                <button id="cancel-map-btn" class="control-btn negative">Cancel</button>
                            </div>
                        </div>
                        <div id="map-display-area">
                            <!-- Map will be rendered here -->
                        </div>
                    </div>
                    <aside id="map-detail-panel" class="card">
                        <div id="map-detail-content">
                            <p class="panel-placeholder">Select a point of interest for details.</p>
                        </div>
                    </aside>
                 </div>
            </main>
        </div>
    </div>

    <div id="poi-editor-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <h2>Add Point of Interest</h2>
            <form id="poi-form">
                <div class="form-group">
                    <label>Type:</label>
                    <p id="poi-form-type"></p>
                </div>
                <div class="form-group">
                    <label for="poi-name">Name:</label>
                    <input type="text" id="poi-name" required>
                </div>
                <div class="form-group">
                    <label for="poi-description">Description:</label>
                    <textarea id="poi-description"></textarea>
                </div>
                <div class="form-group">
                    <label for="poi-faction">Associated Faction (Optional):</label>
                    <select id="poi-faction"></select>
                </div>
                <div class="form-group">
                    <label for="poi-intel">Intel Level Required (Optional):</label>
                    <input type="number" id="poi-intel" min="0" max="100" placeholder="e.g., 50">
                </div>
                <button type="submit" class="startup-btn">Add Point</button>
            </form>
        </div>
    </div>

    <div id="code-output-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <h2>Generated Map Code</h2>
            <p>Copy the code below and replace the corresponding arrays in the specified file.</p>
            <div class="code-output-group">
                <label for="poi-code-output">pointsOfInterest:</label>
                <textarea id="poi-code-output" class="code-output-textarea" readonly></textarea>
            </div>
             <div class="code-output-group">
                <label for="fog-code-output">fogOfWar:</label>
                <textarea id="fog-code-output" class="code-output-textarea" readonly></textarea>
            </div>
        </div>
    </div>

    <script type="module" src="common.js"></script>
    <script type="module" src="navigation.js"></script>
    <script type="module" src="maps.js"></script>
</body>
</html>